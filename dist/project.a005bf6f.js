var scene,camera,controls,fieldOfView,aspectRatio,nearPlane,farPlane,shadowLight,backLight,light,renderer,planeAspectRatio,container,floor,fan,HEIGHT,WIDTH,windowHalfX,windowHalfY,isBlowing=!1,mousePos={x:0,y:0},dist=0;function init(){if(scene=new THREE.Scene,HEIGHT=window.innerHeight,WIDTH=window.innerWidth,aspectRatio=WIDTH/HEIGHT,fieldOfView=100,nearPlane=10,farPlane=1e3,planeAspectRatio=16/9,camera=new THREE.PerspectiveCamera(fieldOfView,aspectRatio,nearPlane,farPlane),fieldOfView=50,camera.aspect=window.innerWidth/window.innerHeight,camera.aspect>planeAspectRatio){const e=Math.tan(THREE.MathUtils.degToRad(fieldOfView/2))/(camera.aspect/planeAspectRatio);camera.fov=2*THREE.MathUtils.radToDeg(Math.atan(e))}else camera.fov=fieldOfView;camera.position.y=350,camera.position.x=-50,camera.position.z=215,camera.lookAt(new THREE.Vector3(0,80,60)),(renderer=new THREE.WebGLRenderer({alpha:!0,antialias:!0})).setPixelRatio(window.devicePixelRatio),renderer.setSize(WIDTH,HEIGHT),renderer.shadowMap.enabled=!0,(container=document.getElementById("world")).appendChild(renderer.domElement),windowHalfX=WIDTH/2,windowHalfY=HEIGHT/2}function createLights(){light=new THREE.HemisphereLight(16777215,16777215,.5),(shadowLight=new THREE.DirectionalLight(16777215,.8)).position.set(200,200,200),shadowLight.castShadow=!0,shadowLight.shadowDarkness=.2,(backLight=new THREE.DirectionalLight(16777215,.4)).position.set(-100,200,50),backLight.shadowDarkness=.1,backLight.castShadow=!0,scene.add(backLight),scene.add(light),scene.add(shadowLight)}function createFan(){(fan=new Fan).threegroup.position.z=100,fan.threegroup.position.y=50,scene.add(fan.threegroup)}function loop(){render();var e=mousePos.x-windowHalfX,t=mousePos.y-windowHalfY;fan.isBlowing=isBlowing,fan.update(e,t),requestAnimationFrame(loop)}function render(){controls&&controls.update(),renderer.render(scene,camera)}function clamp(e,t,i){return Math.min(Math.max(e,t),i)}function rule3(e,t,i,n,s){return n+(Math.max(Math.min(e,i),t)-t)/(i-t)*(s-n)}window.addEventListener("resize",(()=>{if(camera.aspect=window.innerWidth/window.innerHeight,camera.aspect>planeAspectRatio){const e=Math.tan(THREE.MathUtils.degToRad(fieldOfView/2))/(camera.aspect/planeAspectRatio);camera.fieldOfView=2*THREE.MathUtils.radToDeg(Math.atan(e))}else camera.fieldOfView=fieldOfView})),Fan=function(){this.isBlowing=!1,this.speed=0,this.acc=0,this.redMat=new THREE.MeshLambertMaterial({color:11351333,shading:THREE.FlatShading}),this.greyMat=new THREE.MeshLambertMaterial({color:6635340,shading:THREE.FlatShading}),this.yellowMat=new THREE.MeshLambertMaterial({color:16634486,shading:THREE.FlatShading});var e=new THREE.BoxGeometry(10,10,20),t=new THREE.BoxGeometry(10,10,3),i=new THREE.BoxGeometry(10,30,2);i.applyMatrix4((new THREE.Matrix4).makeTranslation(0,25,0)),this.core=new THREE.Mesh(e,this.greyMat);var n=new THREE.Mesh(i,this.redMat);n.position.z=15;var s=n.clone();s.rotation.z=Math.PI/2;var r=n.clone();r.rotation.z=Math.PI;var a=n.clone();a.rotation.z=-Math.PI/2,this.sphere=new THREE.Mesh(t,this.yellowMat),this.sphere.position.z=15,this.propeller=new THREE.Group,this.propeller.add(n),this.propeller.add(s),this.propeller.add(r),this.propeller.add(a),this.threegroup=new THREE.Group,this.threegroup.add(this.core),this.threegroup.add(this.propeller),this.threegroup.add(this.sphere)},Fan.prototype.update=function(e,t){this.threegroup.lookAt(new THREE.Vector3(0,80,60)),this.tPosX=rule3(e,-200,200,-250,250),this.tPosY=rule3(t,-200,200,250,-250),this.threegroup.position.x+=(this.tPosX-this.threegroup.position.x)/10,this.threegroup.position.y+=(this.tPosY-this.threegroup.position.y)/10,this.targetSpeed=this.isBlowing?.3:.01,this.isBlowing&&this.speed<.5?(this.acc+=.001,this.speed+=this.acc):this.isBlowing||(this.acc=0,this.speed*=.98),this.propeller.rotation.z+=this.speed},init(),createLights(),createFan(),loop();class RangeSlider{constructor(e,t){this.settings=Object.assign({clsCircular:"c-rng--circular",clsCircularOutput:"c-rng--circular-output",clsOutput:"c-rng__output",clsOutputWrapper:"c-rng--output",clsRangeTicks:"c-rng--ticks",clsWrapper:"c-rng__wrapper",offset:-90,varPercent:"--rng-percent",varPercentUpper:"--rng-percent-upper",varThumb:"--rng-thumb-w",varUnit:"--rng-unit",varValue:"--rng-value"},stringToType(t)),this.range=e,this.initRange(this.range)}initRange(e){const t=this.settings.range.includes("circular");e.id=e.id||uuid(),this.lower=this.settings.range.includes("upper")?e.parentNode.querySelector('[data-range*="lower"]'):null,this.max=parseInt(e.max,10)||100,this.min=parseInt(e.min,10),this.multiplier=100/(this.max-this.min),this.output=this.settings.range.includes("output")||t?document.createElement("output"):null,this.ticks=parseInt(e.dataset.ticks,10),this.upper=this.settings.range.includes("lower")?e.parentNode.querySelector('[data-range*="upper"]'):null;const i=this.lower||this.upper;if(this.wrapper=i?e.parentNode:document.createElement("div"),this.output&&(this.output.className=t?this.settings.clsCircularOutput:this.settings.clsOutput,this.output.for=e.id,i?this.wrapper.insertBefore(this.output,e):(this.wrapper.classList.add(t?this.settings.clsCircular:this.settings.clsOutputWrapper),this.wrapper.appendChild(this.output))),i||(e.parentNode.insertBefore(this.wrapper,e),this.wrapper.appendChild(e)),e.dataset.modifier&&this.wrapper.classList.add(e.dataset.modifier),this.wrapper.classList.add(this.settings.clsWrapper),this.wrapper.style.setProperty(this.settings.varThumb,getComputedStyle(e).getPropertyValue(this.settings.varThumb)),this.ticks){const e=[...Array(this.ticks).keys()],t=`\n\t\t\t\t<svg class="${this.settings.clsRangeTicks}" width="100%" height="100%">\n\t\t\t\t${e.map((e=>`<rect x="${100/this.ticks*e}%" y="5" width="1" height="100%"></rect>`)).join("")}\n\t\t\t\t<rect x="100%" y="5" width="1" height="100%"></rect>\n\t\t\t</svg>`;this.wrapper.insertAdjacentHTML("afterbegin",t)}if(t){e.hidden=!0;const t=e=>this.updateCircle(this.rotate(e.pageX,e.pageY));this.setCenter(),this.output.setAttribute("tabindex",0),this.output.addEventListener("keydown",(e=>{switch(e.key){case"ArrowLeft":case"ArrowDown":e.preventDefault(),this.range.stepDown(),this.updateCircle();break;case"ArrowRight":case"ArrowUp":e.preventDefault(),this.range.stepUp(),this.updateCircle()}})),this.output.addEventListener("pointerdown",(()=>this.output.addEventListener("pointermove",t))),this.output.addEventListener("pointerup",(()=>this.output.removeEventListener("pointermove",t))),this.updateCircle()}else e.addEventListener("input",(()=>this.updateRange()));e.dispatchEvent(new Event("input"))}rotate(e,t){return 180*Math.atan2(t-this.center.y,e-this.center.x)/Math.PI}setCenter(){const e=this.wrapper.getBoundingClientRect();this.center={x:e.left+e.width/2,y:e.top+e.height/2}}getSpeed(){return this.range.value}updateCircle(e){let t=e,i=360/(this.max-this.min);t||(t=i*this.range.valueAsNumber+this.settings.offset);let n=t-this.settings.offset;n<0&&(n+=360),e&&(this.range.value=Math.ceil(n/i)),this.wrapper.dataset.value=this.range.value,document.getElementById("auto").checked=!1,this.wrapper.style.setProperty("--angle",`${t}deg`),this.wrapper.style.setProperty("--gradient-end",`${n}deg`)}updateRange(){if(this.lower&&this.lower.valueAsNumber>this.range.valueAsNumber)return void(this.range.value=this.lower.valueAsNumber);if(this.upper&&this.upper.valueAsNumber<this.range.valueAsNumber)return void(this.range.value=this.upper.valueAsNumber);const e=(this.range.valueAsNumber-this.min)*this.multiplier;this.range.style.setProperty(this.settings.varPercent,`${e}%`),this.range.style.setProperty(this.settings.varValue,`${this.range.valueAsNumber}`),this.lower&&this.lower.style.setProperty(this.settings.varPercentUpper,`${e}%`),this.output&&(this.output.style.setProperty(this.settings.varUnit,`${e}`),this.output.innerText=this.range.value)}}function stringToType(e){const t=Object.assign({},e);return Object.keys(t).forEach((e=>{"string"==typeof t[e]&&":"===t[e].charAt(0)&&(t[e]=JSON.parse(t[e].slice(1)))})),t}function uuid(){return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,(e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)))}const element=document.querySelector("[data-range]");var rslider=new RangeSlider(element,element.dataset);const control=document.getElementById("control");document.getElementById("checkcross").addEventListener("click",(function(e){isBlowing=!!document.getElementById("checkcross").checked}));const control1=document.getElementById("control1");document.getElementById("updateManual").addEventListener("click",(function(e){console.log(rslider.getSpeed())}));var SpeechRecognition=SpeechRecognition||webkitSpeechRecognition,SpeechGrammarList=SpeechGrammarList||webkitSpeechGrammarList,SpeechRecognitionEvent=SpeechRecognitionEvent||webkitSpeechRecognitionEvent,commands=["Start","Stop","Increase","Decrease","Change Mode"],grammar="#JSGF V1.0; grammar commands; public <command> = "+commands.join(" | ")+" ;",recognition=new SpeechRecognition,speechRecognitionList=new SpeechGrammarList;speechRecognitionList.addFromString(grammar,1),recognition.grammars=speechRecognitionList,recognition.continuous=!1,recognition.lang="en-US",recognition.interimResults=!1,recognition.maxAlternatives=1,commands.forEach((function(e,t,i){console.log(e,t)}));var com="";commands.forEach((function(e,t,i){com+=t+1+") "+e+" "})),document.getElementById("my-modal-2").onclick=function(){recognition.start(),document.getElementById("modal-info").textContent="Ready to Receive a Command...",document.getElementById("modal-commands").textContent=com,console.log("Ready to receive a Command.")},recognition.onresult=function(e){var t=e.results[0][0].transcript;if(t=t.toLowerCase(),console.log("Command Recived: "+t),document.getElementById("modal-info").textContent="Command Recieved "+t,"start"!==t||$("#checkcross").is(":checked")){if("stop"===t&&$("#checkcross").is(":checked")){$("#checkcross").trigger("click");var i=new SpeechSynthesisUtterance;i.text="Fan Stopped",window.speechSynthesis.speak(i)}else if("increase"===t&&$("#checkcross").is(":checked")){$("#auto").checked=!1,rslider.range.stepUp(),rslider.updateCircle();var n=new SpeechSynthesisUtterance;n.text="Fan Speed Increased to "+rslider.getSpeed()+"%",window.speechSynthesis.speak(n),$("#updateManual").trigger("click")}else if("decrease"===t&&$("#checkcross").is(":checked")){$("#auto").checked=!1,rslider.range.stepDown(),rslider.updateCircle();var s=new SpeechSynthesisUtterance;s.text="Fan Speed Decreased to "+rslider.getSpeed()+"%",window.speechSynthesis.speak(s),$("#updateManual").trigger("click")}else if("change mode"===t){var r;if($("#auto").trigger("click"),$("#auto").is(":checked"))(r=new SpeechSynthesisUtterance).text="Fan Mode is Automatic",window.speechSynthesis.speak(r);else(r=new SpeechSynthesisUtterance).text="Fan Mode is Manual",window.speechSynthesis.speak(r)}}else{$("#checkcross").trigger("click");var a=new SpeechSynthesisUtterance;a.text="Fan Started",window.speechSynthesis.speak(a)}console.log("Confidence: "+e.results[0][0].confidence),recognition.stop()},recognition.onspeechend=function(){recognition.stop()},recognition.onnomatch=function(e){console.log("I didn't recognise that command.")},recognition.onerror=function(e){console.log("Error occurred in recognition: "+e.error)};
//# sourceMappingURL=project.a005bf6f.js.map
