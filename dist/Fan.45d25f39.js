var scene,camera,controls,fieldOfView,aspectRatio,nearPlane,farPlane,shadowLight,backLight,light,renderer,planeAspectRatio,container,floor,fan,isBlowing=!1;$("#switch").is(":checked")&&(isBlowing=!0);var HEIGHT,WIDTH,windowHalfX,windowHalfY,mousePos={x:0,y:0},dist=0;function init(){if(scene=new THREE.Scene,HEIGHT=window.innerHeight,WIDTH=window.innerWidth,aspectRatio=WIDTH/HEIGHT,fieldOfView=100,nearPlane=10,farPlane=1e3,planeAspectRatio=16/9,camera=new THREE.PerspectiveCamera(fieldOfView,aspectRatio,nearPlane,farPlane),fieldOfView=50,camera.aspect=window.innerWidth/window.innerHeight,camera.aspect>planeAspectRatio){const e=Math.tan(THREE.MathUtils.degToRad(fieldOfView/2))/(camera.aspect/planeAspectRatio);camera.fov=2*THREE.MathUtils.radToDeg(Math.atan(e))}else camera.fov=fieldOfView;camera.position.y=350,camera.position.x=-50,camera.position.z=230,camera.lookAt(new THREE.Vector3(0,0,0)),(renderer=new THREE.WebGLRenderer({alpha:!0,antialias:!0})).setPixelRatio(window.devicePixelRatio),renderer.setSize(WIDTH,HEIGHT),renderer.shadowMap.enabled=!0,(container=document.getElementById("world")).appendChild(renderer.domElement),windowHalfX=WIDTH/2,windowHalfY=HEIGHT/2}function createLights(){light=new THREE.HemisphereLight(16777215,16777215,.5),(shadowLight=new THREE.DirectionalLight(16777215,.8)).position.set(200,200,200),shadowLight.castShadow=!0,shadowLight.shadowDarkness=.2,(backLight=new THREE.DirectionalLight(16777215,.4)).position.set(-100,200,50),backLight.shadowDarkness=.1,backLight.castShadow=!0,scene.add(backLight),scene.add(light),scene.add(shadowLight)}function createFan(){(fan=new Fan).threegroup.position.z=100,fan.threegroup.position.y=50,scene.add(fan.threegroup)}function loop(){render();var e=mousePos.x-windowHalfX,t=mousePos.y-windowHalfY;fan.isBlowing=isBlowing,fan.update(e,t),requestAnimationFrame(loop)}function render(){controls&&controls.update(),renderer.render(scene,camera)}function clamp(e,t,i){return Math.min(Math.max(e,t),i)}function rule3(e,t,i,a,n){return a+(Math.max(Math.min(e,i),t)-t)/(i-t)*(n-a)}window.addEventListener("resize",(()=>{if(camera.aspect=window.innerWidth/window.innerHeight,camera.aspect>planeAspectRatio){const e=Math.tan(THREE.MathUtils.degToRad(fieldOfView/2))/(camera.aspect/planeAspectRatio);camera.fieldOfView=2*THREE.MathUtils.radToDeg(Math.atan(e))}else camera.fieldOfView=fieldOfView})),Fan=function(){this.isBlowing=!1,this.speed=0,this.acc=0,this.redMat=new THREE.MeshLambertMaterial({color:11351333,shading:THREE.FlatShading}),this.greyMat=new THREE.MeshLambertMaterial({color:6635340,shading:THREE.FlatShading}),this.yellowMat=new THREE.MeshLambertMaterial({color:16634486,shading:THREE.FlatShading});var e=new THREE.BoxGeometry(10,10,20),t=new THREE.BoxGeometry(10,10,3),i=new THREE.BoxGeometry(10,30,2);i.applyMatrix4((new THREE.Matrix4).makeTranslation(0,25,0)),this.core=new THREE.Mesh(e,this.greyMat);var a=new THREE.Mesh(i,this.redMat);a.position.z=15;var n=a.clone();n.rotation.z=Math.PI/2;var o=a.clone();o.rotation.z=Math.PI;var r=a.clone();r.rotation.z=-Math.PI/2,this.sphere=new THREE.Mesh(t,this.yellowMat),this.sphere.position.z=15,this.propeller=new THREE.Group,this.propeller.add(a),this.propeller.add(n),this.propeller.add(o),this.propeller.add(r),this.threegroup=new THREE.Group,this.threegroup.add(this.core),this.threegroup.add(this.propeller),this.threegroup.add(this.sphere)},Fan.prototype.update=function(e,t){this.threegroup.lookAt(new THREE.Vector3(0,80,60)),this.tPosX=rule3(e,-200,200,-250,250),this.tPosY=rule3(t,-200,200,250,-250),this.threegroup.position.x+=(this.tPosX-this.threegroup.position.x)/10,this.threegroup.position.y+=(this.tPosY-this.threegroup.position.y)/10,this.targetSpeed=this.isBlowing?.3:.01,this.isBlowing&&this.speed<.5?(this.acc+=.001,this.speed+=this.acc):this.isBlowing||(this.acc=0,this.speed*=.98),this.propeller.rotation.z+=this.speed},init(),createLights(),createFan(),loop();
//# sourceMappingURL=Fan.45d25f39.js.map
